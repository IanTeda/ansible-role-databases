# =============================================================================
# Valkey configuration file (generated by Ansible)
#
# This file configures Valkey (Redis alternative) for secure, local operation
# on Debian systems. All settings are managed via Ansible templates.
#
# Logging is set to use systemd journal only (logfile "").
#
# References:
#   - https://databases_valkey.io/docs/reference/config.html
#   - https://databases_valkey.io/
#   - https://raw.githubusercontent.com/valkey-io/valkey/7.2/databases_valkey.conf
#
# Edit variables in your playbook to customise deployment.
# =============================================================================

# IP address to bind to. By default, Valkey binds to 0.0.0.0
bind {{ databases_valkey.listen_address }}

# Accept connections on the specified port, default is 6379.
# If port 0 is specified the server will not listen on a TCP socket.
port {{ databases_valkey.port }}

unixsocket {{ databases_valkey.socket_path }}
unixsocketperm {{ databases_valkey.socket_perm }}

# When the server is supervised by upstart or systemd, the daemonize parameter has 
# no impact.
daemonize no
supervised systemd

# We want to log to systemd journal, so set to emtpy string to force the server
# to log on stadardout
logfile ""

# The working directory. The DB will be written inside this directory.
dir {{ valkey_data_dir }}

# Require a password to access the server.
# This is the admin password for the Valkey server.
requirepass {{ databases_admin.password }}