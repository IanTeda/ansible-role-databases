# =============================================================================
# Nginx Location Block for Adminer Database Administration Tool
# =============================================================================
# ⚠️ WARNING: This file is managed by Ansible - DO NOT EDIT MANUALLY! ⚠️
# Any manual changes will be overwritten on the next Ansible run.
# Edit the template file or Ansible variables instead.
#
# Generated from: roles/debian/templates/adminer-nginx-location.j2
# Deploy path: "/etc/nginx/conf.d/{{ ansible_hostname }}-{{ databases_adminer.path_prefix }}.conf"
# Last updated: {{ ansible_date_time.iso8601 }}
#
# =============================================================================


location /{{ databases_adminer.path_prefix }}/ {
    root /var/www;
    index index.php;

    location ~ ^/{{ databases_adminer.path_prefix }}/(.+\.php)$ {
        root /var/www;
        fastcgi_pass unix:/run/php/php-fpm.sock;
        fastcgi_index index.php;
        fastcgi_param SCRIPT_FILENAME /var/www/{{ databases_adminer.path_prefix }}/$1;
        include fastcgi_params;
    }

    # Deny access to .ht* files
    location ~ /\.ht {
        deny all;
    }
}
